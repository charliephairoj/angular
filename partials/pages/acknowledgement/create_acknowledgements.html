<div class="createAcknowledgementPage" ng-init="show_customers=false; show_upholstery=false;show_custom_item=false;" fade-in>
	
	
	
	
	<form class="ack" name="form" ec-droppable="add()" novalidate>
		
		<!--
			Sidebar
		-->
		
		<div class="sidebar">
			<header>
				<h1>
					<span>Contacts</span>
				</h1>
			</header>
			<nav>
				<ul class="list">
					<li><div ng-class="{dirty:form.$invalid}" ng-click="create()" >Create</div></li>
					<li><div ng-click="show_customers=!show_customers">Add Customer</div></li>
					<li><div ng-class="{dirty:!ack.customer}" ng-click="show_upholstery=true">Add Upholstery</div></li>
					<li><div ng-class="{dirty:!ack.customer}" ng-click="show_modal=true">Add Custom Item</div></li>
					<li><div ng-click="show_calendar=true">Set Delivery Date</div></li>
					<li><div ng-click="reset()" >Reset</div></li>
				</ul>
			</nav>
			
		</div>
		
		<!--
			Panels
		-->
		
		<div class="customer_modal" data-modal ng-model="show_customers">
			<div class="title">
				Customers
				<input type="text" class="search" ng-model="query_customers" />
			</div>
			<div class="container">
				<ul class="list">
					<li class="item" ng-click="add_customer($index)" ng-repeat="customer in customer_list | filter:query_customers">{{customer.name}}</li>
				</ul>
			</div>
			
		</div>
		
		<div class="upholstery_modal" data-modal ng-model="show_upholstery">
			<div class="title">
				Upholstery
				<input type="text" class="search" ng-model="query_uphol" />
				
			</div>
			<div class="container">
				<div class="list">
					<div class="item" ng-click="add_upholstery($index)" ng-repeat="upholstery in upholstery_list | filter:query_uphol ">
						<img ng-src="{{upholstery.url}}" />{{upholstery.description}}
					</div>
				</div>
			</div>
			
		</div>
		<div data-modal ng-model="show_fabric" class="fabric_modal">
			<div class="title">
				Fabric
				<input type="text" class="search" ng-model="query_fabric" />
				
			</div>
			<div class="container">
				<div class="product_container">
					<div class="product" data-drop-on="ack.products[ack.products.length-1].fabric">
						<div>{{ack.products[ack.products.length-1].description}}</div>
						
						<div class="fabric" ui-if="ack.products[ack.products.length-1].fabric">
							Fabric:  {{ack.products[ack.products.length-1].fabric.description}}
							<img ng-src="{{ack.products[ack.products.length-1].fabric.image_url}}" />
						</div>
						
					</div>
					<div class="pillow" ng-repeat="pillow in ack.products[ack.products.length-1].pillows" data-drop-on="pillow.fabric">
						<div>{{pillow.type | beautify}} Pillow</div>
						<div class="fabric">
							Fabric: {{pillow.fabric.description}}
							<img ng-src="{{pillow.fabric.image_url}}" />
						</div>
					</div>
				</div>
				<div class="fabric_container">
					<ul class="list">
						<li class="item" ng-repeat="fabric in fabric_list | filter:query_fabric " data-drag-on="fabric">
							<img ng-src="{{fabric.image_url}}" />
							<div class="details">
								Pattern: {{fabric.pattern}}
								<br />
								Color: {{fabric.color}}
							</div>
							
						</li>
					</ul>
				</div>
				<button style="position:absolute; bottom:10px; left:10px; z-index:10" ng-click="show_fabric = false">Submit</button>
				
			</div>
			
		</div>
		<div data-modal ng-model="show_quantity">
			<table>
				<tr>
					
					<td>Quantity</td>
					<td><input type="text" ng-model="ack.products[ack.products.length-1].quantity" /></td>
					<button ng-click="show_quantity=false;show_fabric=true;">Click me</div>
				</tr>
			</table>
		</div>
		<div data-modal ng-model="show_modal">
			<table>
				<tr>
					<td>Description</td>
					<td><input type="text" ng-model="custom.description" /></td>
					<td>Quantity</td>
					<td><input type="text" ng-model="custom.quantity" /></td>
					<div ng-click="show_modal=false">Click me</div>
				</tr>
			</table>
		</div>
		
		<div class="calendar_modal" data-modal  ng-model="show_calendar">
			<div ui-date ng-model="ack.delivery_date">
			</div>
			<button ng-click="show_calendar=!show_calendar">Select</button>
		</div>
		
		<!--
			Workspace
		-->
		<div class="workspace">
				
				<div class="customer">
					<span class="title">Customer</span>
					<table class="details">
						<tr>
							<td>Name:</td>
							<td>{{ack.customer.name}}</td>
						<tr>
							<td>Address:</td>
							<td>
								{{ack.customer.addresses[0].address1}}
								<br />
								{{ack.customer.addresses[0].city}}, {{ack.customer.addresses[0].territory}}
								<br />
								{{ack.customer.addresses[0].territory}}, {{ack.customer.addresses[0].country}} {{ack.customer.addresses[0].zipcode}}
							</td>
						</tr>
						<tr>
							<td>Telephone:</td>
							<td>{{ack.customer.telephone}}</td>
						</tr>
						<tr>
							<td>Email:</td>
							<td>{{ack.customer.email}}</td>
						</tr>
					</table>
				</div>
				
				<div class="order">
					<table class="details">
						<tr>
							<td>Delivery Date:</td>
							<td>{{ack.delivery_date | date:"MMMM d, yyyy"}}</td>
						</tr>
						<tr>
							<td>Shipping:</td>
							<td>
								<select ng-model="ack.shipping.type">
									<option value="none">None</option>
									<option value="air">Air Freight</option>
									<option value="ground">Ground Freight</option>
									<option value="sea">Sea Freight</option>
								</select>
							</td>
							
						</tr>
						<tr>
							<td>Shipping Amount:</td>
							<td>
								<input type="text" ng-model="ack.shipping.amount" ng-pattern="/^[1-9](\d+)?(\.\d{2})?$/"/>
							</td>
						</tr>
						<tr>
							<td>Vat:</td>
							<td><input type="text" required ng-pattern="/^\d{0,2}$/" ng-model="ack.vat" />%</td>
						</tr>
						<tr>
							<td>Currency:</td>
							<td>
								{{ack.customer.currency}}
							</td>
						</tr>
					</table>
					
						
					
					
					<table class="currency" ui-if="supplier">
						
					</table>
				</div>
				
			
			<div class="products" ng-show="ack.products">
				<div class="title">Products</div>
				<div class="product" ng-repeat="product in ack.products">
					{{product.description}}
					<table class="details">
						<tr>
							<td>Qty:</td>
							<td>{{product.quantity}}</td>
						</tr>
						<tr>
							<td>Custom Size:</td>
							<td><input type="checkbox" ng-model="product.is_custom_size" /></td>
						</tr>
						<tr>
							<td>Width:</td>
							<td><input type="text" ng-class="{'active':product.is_custom_size}" ng-disabled="!product.is_custom_size" ng-model="product.width" />mm</td>
						</tr>
						<tr>
							<td>Depth:</td>
							<td><input type="text" ng-class="{'active':product.is_custom_size}" ng-disabled="!product.is_custom_size" ng-model="product.depth" />mm</td>
						</tr>
						<tr>
							<td>Height:</td>
							<td><input type="text" ng-class="{'active':product.is_custom_size}" ng-disabled="!product.is_custom_size" ng-model="product.height" />mm</td>
						</tr>
						<tr>
							<td>Fabric: </td>
							<td>
								{{product.fabric.description}}
								<img ng-src="{{product.fabric.image_url}}" />
							</td>
							<td>
								
							</td>
							
						</tr>
						<tr ng-repeat="pillow in product.pillows">
							<td>{{pillow.type | beautify}} Pillow</td>
							<td>{{pillow.fabric.description}}<img ng-src="{{pillow.fabric.image_url}}" /></td>
						</tr>
					</table>
					<img ng-src="{{product.url}}" />
				</div>
				
				
			</div>
		</div>
	</form>
	
</div>